---
import { getCollection, render } from "astro:content";
import Base from "../../layouts/Base.astro";

export async function getStaticPaths() {
  const foundations = await getCollection("foundations");
  return foundations.map((foundation) => ({
    params: { slug: foundation.id },
    props: { foundation },
  }));
}

const { foundation } = Astro.props;
const { Content } = await render(foundation);
const base = import.meta.env.BASE_URL;
---

<Base title={foundation.data.title}>
  <article class="container foundation-detail">
    <header>
      <h1><span>{foundation.data.title}</span></h1>
      <p class="description">{foundation.data.description}</p>
    </header>

    <div class="content md">
      <Content />
    </div>

    <div class="back-link">
      <a href={`${base}#foundations`}>‚Üê Back to foundations</a>
    </div>
  </article>
</Base>

<style>
  .foundation-detail {
    max-width: var(--max-width-text);
    margin: 0 auto;
  }

  header {
    text-align: center;
    margin-bottom: var(--sp-xl);
  }

  h1 {
    margin-bottom: var(--sp-m);
  }

  .description {
    font-size: var(--fs-1);
    font-weight: 600;
    color: var(--color-primary);
    line-height: 1.5;
  }

  .content {
    line-height: 1.6;
    margin-bottom: var(--sp-xl);
  }

  .back-link {
    text-align: center;
    margin-top: var(--sp-xl);
    padding-top: var(--sp-xl);
    border-top: solid 1px var(--color-text);
  }

  .back-link a {
    color: var(--color-text);
    text-decoration: none;
    padding: var(--sp-s) var(--sp-m);
    border: solid 2px var(--color-text);
    border-radius: var(--br-m);
    display: inline-block;
    transition: all 0.2s ease;
  }

  .back-link a:hover {
    background-color: var(--color-primary);
    transform: translateY(-2px);
  }
</style>
